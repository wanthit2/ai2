<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Food Finder - ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° Style ‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå‡πÉ‡∏´‡∏°‡πà */
    body { font-family: 'Prompt', sans-serif; }
    .restaurant-grid { 
        display: grid; 
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); 
        gap: 20px; 
        padding: 20px 0;
    }
    .card {
        background: white;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        cursor: pointer;
        transition: 0.3s;
    }
    .card:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(0,0,0,0.1); }
    .card img { width: 100%; height: 180px; object-fit: cover; }
    .card-info { padding: 15px; }
    .card-info h3 { margin: 0; font-size: 1.1rem; }
    .card-info p { color: #4f46e5; font-size: 0.85rem; margin: 5px 0; }
    .open-tag { color: #10b981; font-size: 0.8rem; font-weight: bold; }
  </style>
</head>
<body>

<nav class="navbar">
  <h2 class="logo" onclick="location.href='home.html'" style="cursor:pointer">üçú FoodFinder</h2>
  <ul class="menu">
    <li onclick="location.href='home.html'">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</li>
    <li onclick="goRestaurants()">‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£</li>
    <li onclick="location.href='reviews.html'">‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</li>
    <li>‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</li>
    <li onclick="location.href='profile.html'">‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</li>
  </ul>
  <button class="login-btn" id="authBtn">Login</button>
</nav>

<section class="hero">
  <h1>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÉ‡∏Å‡∏•‡πâ‡∏Ñ‡∏∏‡∏ì</h1>
  <div class="search-box">
    <input type="text" id="homeSearch" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡πâ‡∏≤‡∏ô ‡∏´‡∏£‡∏∑‡∏≠ ‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£...">
    <button onclick="handleSearch()">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
  </div>
</section>

<section class="categories">
  <h2>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h2>
  <div class="category-list">
    <div class="category" onclick="searchByCategory('‡πÄ‡∏™‡πâ‡∏ô')">üçú<p>‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß</p></div>
    <div class="category" onclick="searchByCategory('‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤')">üçï<p>‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤</p></div>
    <div class="category" onclick="searchByCategory('‡∏ã‡∏π‡∏ä‡∏¥')">üç£<p>‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô</p></div>
    <div class="category" onclick="searchByCategory('‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û')">ü•ó<p>‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</p></div>
    <div class="category" onclick="searchByCategory('‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà')">‚òï<p>‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà</p></div>
    <div class="category" onclick="searchByCategory('‡∏ü‡∏≤‡∏™‡∏ï‡πå‡∏ü‡∏π‡πâ‡∏î')">üçî<p>‡∏ü‡∏≤‡∏™‡∏ï‡πå‡∏ü‡∏π‡πâ‡∏î</p></div>
  </div>
</section>

<section class="restaurants">
  <h2>‡∏£‡πâ‡∏≤‡∏ô‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏Å‡∏•‡πâ‡∏Ñ‡∏∏‡∏ì</h2>
  <div class="restaurant-grid" id="featuredRestaurants">
    <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏£‡πâ‡∏≤‡∏ô‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥...</p>
  </div>
</section>

<script>
const API_URL = "https://ai2-production-18cb.up.railway.app";

window.onload = function() {
    loadFeaturedShops();
};

// 1. ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏°‡∏≤‡πÇ‡∏ä‡∏ß‡πå‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å (‡∏î‡∏∂‡∏á‡∏°‡∏≤ 3-4 ‡∏£‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î)
async function loadFeaturedShops() {
    try {
        const response = await fetch(`${API_URL}/get-shops`);
        const shops = await response.json();
        
        const display = document.getElementById("featuredRestaurants");
        display.innerHTML = "";

        // ‡πÄ‡∏≠‡∏≤‡πÅ‡∏Ñ‡πà 3 ‡∏£‡πâ‡∏≤‡∏ô‡πÅ‡∏£‡∏Å‡∏°‡∏≤‡πÇ‡∏ä‡∏ß‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
        shops.slice(0, 3).forEach(shop => {
            const imgPath = shop.image_url 
                ? `${API_URL}/uploads/${shop.image_url}` 
                : 'https://via.placeholder.com/400x300?text=No+Image';

            display.innerHTML += `
                <div class="card" onclick="location.href='restaurant.html?id=${shop.id}'">
                    <img src="${imgPath}">
                    <div class="card-info">
                        <h3>${shop.name}</h3>
                        <p>${shop.hashtags || '#‡∏£‡πâ‡∏≤‡∏ô‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥'}</p>
                        <span class="open-tag">‚óè ‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà</span>
                    </div>
                </div>
            `;
        });
    } catch (error) {
        console.error("Error loading shops:", error);
    }
}

// 2. ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å
function handleSearch() {
    const keyword = document.getElementById("homeSearch").value;
    if(keyword) {
        // ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        window.location.href = `restaurants.html?search=${encodeURIComponent(keyword)}`;
    }
}

function searchByCategory(cat) {
    window.location.href = `restaurants.html?search=${encodeURIComponent(cat)}`;
}

function goRestaurants() {
  window.location.href = "restaurants.html";
}
</script>

<script src="auth.js"></script>
</body>
</html>
